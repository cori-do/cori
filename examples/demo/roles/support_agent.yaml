# =============================================================================
# SUPPORT AGENT ROLE
# =============================================================================
# AI agent for customer support operations.
# Can view most customer data, manage tickets, but limited write access.

name: support_agent
description: "AI agent for customer support operations"

tables:
  customers:
    readable: [customer_id, first_name, last_name, email, phone, company, status, created_at, updated_at]
    # Note: 'notes' and 'lifetime_value' are excluded (sensitive)
    editable: {}  # Read-only access to customers
  
  contacts:
    readable: [contact_id, customer_id, first_name, last_name, position, email, phone, is_primary, created_at]
    editable: {}
  
  tickets:
    readable: [ticket_id, customer_id, assigned_to, ticket_number, subject, description, status, priority, category, resolved_at, created_at, updated_at]
    editable:
      status:
        allowed_values: [open, in_progress, pending_customer, resolved]
        # Note: 'closed' is excluded - requires manager approval
      priority:
        requires_approval: true  # Human must approve priority changes
  
  orders:
    readable: [order_id, customer_id, order_number, order_date, status, total_amount, created_at]
    # Note: shipping_cost, tax_amount, discount_amount excluded
    editable: {}
  
  products:
    readable: [product_id, name, description, sku, price, category]
    # Note: 'cost' excluded (internal pricing)
    editable: {}
  
  communications:
    readable: "*"  # All columns
    editable: {}
  
  notes:
    readable: [note_id, customer_id, ticket_id, content, created_at]
    # Note: is_internal excluded (support shouldn't see internal flags)
    editable: {}

# Tables this role cannot access at all
blocked_tables:
  - users
  - api_keys
  - billing
  - audit_logs
  - opportunities  # Sales data, not for support
  - invoices       # Financial data
  - payments       # Financial data

# Query limits
max_rows_per_query: 100
max_affected_rows: 10

# Blocked operations
blocked_operations:
  - DELETE
  - TRUNCATE
  - DROP

