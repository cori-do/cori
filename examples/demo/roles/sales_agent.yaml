# =============================================================================
# SALES AGENT ROLE
# =============================================================================
# AI agent for sales operations.
# Can view and manage sales pipeline, customers, and opportunities.

name: sales_agent
description: "AI agent for sales team operations"

tables:
  customers:
    readable: [customer_id, first_name, last_name, email, phone, company, status, lifetime_value, created_at, updated_at]
    editable:
      status:
        allowed_values: [active, inactive]
        # Note: 'churned' requires approval
      notes:
        requires_approval: false  # Can update notes freely
  
  contacts:
    readable: "*"
    editable:
      position: {}
      phone: {}
      is_primary: {}
  
  opportunities:
    readable: "*"
    editable:
      stage:
        allowed_values: [lead, qualified, proposal, negotiation]
        # Note: closed_won, closed_lost require manager approval
      estimated_value: {}
      probability: {}
      expected_close_date: {}
      description: {}
  
  products:
    readable: [product_id, name, description, sku, price, category, stock_quantity]
    editable: {}
  
  orders:
    readable: "*"
    editable:
      status:
        allowed_values: [pending, processing]
      notes: {}
  
  order_items:
    readable: "*"
    editable: {}
  
  communications:
    readable: "*"
    editable: "*"  # Can log all communication details
  
  tasks:
    readable: "*"
    editable:
      status:
        allowed_values: [not_started, in_progress, completed]
      priority: {}
      description: {}
  
  notes:
    readable: "*"
    editable:
      content: {}
  
  tags:
    readable: "*"
    editable: {}
  
  customer_tags:
    readable: "*"
    editable: {}  # Can't modify tags (admin function)

blocked_tables:
  - users
  - api_keys
  - billing
  - audit_logs
  - invoices
  - payments

max_rows_per_query: 500
max_affected_rows: 50

blocked_operations:
  - DELETE
  - TRUNCATE
  - DROP

